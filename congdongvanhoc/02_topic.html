<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="google-site-verification" content="73dRIdwl0wADm4SOV2_fm4zWOu8ZbaaJQbfiFdVc09g" />
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>HOPVAN - Cộng đồng văn học</title>
        <meta property="og:title" content="HOPVAN - Học văn thông minh" />
        <meta property="og:description" content="Nền tảng học tập Ngữ Văn tích hợp AI – hỗ trợ tự học thông minh, phân tích tác phẩm, luyện viết hiệu quả." />
        <meta property="og:image" content="https://hopvan.netlify.app/panel.webp" />
        <meta property="og:url" content="https://hopvan.netlify.app" />
        <meta property="og:type" content="article" />
        <link href="../LOGO.WEBP" rel="icon" type="logo-white.png"/>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">

        <link href="css/style_index_blocks.min.css" rel="stylesheet">
        <link href="css/style_custom_only.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="css/style.css" media="screen" />
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="font-awesome-4.0.3/css/font-awesome.min.css">

    </head>

    <style>
/* 1. CSS Ghi đè cho Avatar trong Header (.headernav .avt) */
.headernav .avt .avatar {
    width: 40px !important; /* Buộc kích thước header avatar */
    height: 40px !important;
    border-radius: 50% !important;
    overflow: hidden; 
    padding: 0; 
    margin: 0 0 0 10px; 
}

.headernav .avt .avatar img {
    width: 100% !important; 
    height: 100% !important;
    object-fit: cover !important;
    border-radius: 50% !important;
    box-shadow: none !important;
    display: block !important;
}

/* 2. CSS SỬA LỖI cho Avatar trong BÀI POST/BÌNH LUẬN (.post .userinfo) */
.post .userinfo .avatar {
    width: 50px !important; /* Kích thước cho avatar bài viết/bình luận/form trả lời */
    height: 50px !important;
    border-radius: 50% !important;
    overflow: hidden;
    padding: 0;
}

.post .userinfo .avatar img {
    width: 100% !important; 
    height: 100% !important;
    object-fit: cover !important;
    border-radius: 50% !important;
    box-shadow: none !important;
    display: block !important;
}
</style>

<div id="header"></div>
<script>
fetch("header.html")
  .then(res => res.text())
  .then(data => document.getElementById("header").innerHTML = data);
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  function setupPagination(sectionId, itemsPerPage=6) {
    const section = document.getElementById(sectionId);
    const cards = Array.from(section.querySelectorAll(".news-card"));
    const totalPages = Math.ceil(cards.length / itemsPerPage);

    const paginationContainer = document.createElement("div");
    paginationContainer.className = "pagination";
    section.insertAdjacentElement("afterend", paginationContainer);

    let currentPage = 1;

    function renderPagination() {
      paginationContainer.innerHTML = "";

      // Prev
      const prev = document.createElement("span");
      prev.className = "prev";
      prev.textContent = "«";
      prev.onclick = () => {
        if (currentPage > 1) {
          currentPage--;
          renderCards();
          renderPagination();
        }
      };
      paginationContainer.appendChild(prev);

      // Page numbers
      for (let i = 1; i <= totalPages; i++) {
        const page = document.createElement("span");
        page.className = "page-number" + (i === currentPage ? " active" : "");
        page.textContent = i;
        page.onclick = () => {
          currentPage = i;
          renderCards();
          renderPagination();
        };
        paginationContainer.appendChild(page);
      }

      // Next
      const next = document.createElement("span");
      next.className = "next";
      next.textContent = "»";
      next.onclick = () => {
        if (currentPage < totalPages) {
          currentPage++;
          renderCards();
          renderPagination();
        }
      };
      paginationContainer.appendChild(next);
    }

    function renderCards() {
      cards.forEach((card, index) => {
        // reset
        card.style.display = "none";
        card.classList.remove("show");
      });

      const start = (currentPage - 1) * itemsPerPage;
      const end = start + itemsPerPage;

      cards.slice(start, end).forEach((card, i) => {
        card.style.display = "block";
        // delay animation theo vị trí để đẹp hơn
        setTimeout(() => card.classList.add("show"), i * 100);
      });
    }

    renderCards();
    renderPagination();
  }

  // chạy cho NEWS (7 card -> 6 + 1)
  setupPagination("news-section", 6);

  // chạy cho HUMANS (10 card -> 6 + 4)
  setupPagination("humans-section", 6);
});
</script>

        <div class="container-fluid">

            <div class="headernav">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-3 col-xs-9 col-sm-5 col-md-3 selecttopic">
                            <div class="dropdown">
                                <a data-toggle="dropdown" href="index.html" >Cộng đồng văn học</a> 
                            </div>
                        </div>
                        <div class="col-lg-4 search hidden-xs hidden-sm col-md-3">
                            <div class="wrap">
                                <form action="#" class="form">
                                    <div class="pull-left txt"><input type="text" class="form-control" placeholder="Tìm kiếm Topics"></div>
                                    <div class="pull-right"><button class="btn btn-default" type="button"><i class="fa fa-search"></i></button></div>
                                    <div class="clearfix"></div>
                                </form>
                            </div>
                        </div>
                        <div class="col-lg-4 col-xs-12 col-sm-5 col-md-4 avt">
                            <div class="stnt pull-left">                            
                                <form action="03_new_topic.html"  class="form">
                                    <button class="btn btn-primary">Tạo Topic mới</button>
                                </form>
                            </div>
                            <div class="env pull-left"><i class="fa fa-envelope"></i></div>

                            <div class="avatar pull-left dropdown">
                                <a data-toggle="dropdown" href="06_profile.html"><img src="images/avatar.jpg" alt="" /></a> <b class="caret"></b>
                                <div class="status green">&nbsp;</div>
                                <ul class="dropdown-menu" role="menu">
                                    <li role="presentation"><a role="menuitem" tabindex="-1" href="#">My Profile</a></li>
                                    <li role="presentation"><a role="menuitem" tabindex="-2" href="#">Inbox</a></li>
                                    <li role="presentation"><a role="menuitem" tabindex="-3" href="#">Log Out</a></li>
                                    <li role="presentation"><a role="menuitem" tabindex="-4" href="04_new_account.html">Create account</a></li>
                                </ul>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
            </div>



            <section class="content">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-8 breadcrumbf">
                            <a href="index.html">Trang chủ</a> <span class="diviver">&gt;</span> <a href="#">Bài đăng</a> <span class="diviver">&gt;</span></a>
                        </div>
                    </div>
                </div>


                <div class="container">
                    <div class="row">
                        <div class="col-lg-8 col-md-8">

                            <div class="post beforepagination">
                                <div class="topwrap">
                                    <div class="userinfo pull-left">
                                        <a href="06_profile.html">
                                            <div class="avatar">
                                                <img src="images/avatar.jpg" alt="" />
                                                <div class="status green">&nbsp;</div>
                                            </div>
                                        </a>

                                        <div class="icons">
                                            <img src="images/icon1.jpg" alt="" /><img src="images/icon4.jpg" alt="" /><img src="images/icon5.jpg" alt="" /><img src="images/icon6.jpg" alt="" />
                                        </div>
                                    </div>
                                    <div class="posttext pull-left">
                                        <h2>Khắc họa nhân vật: Cách nào để viết nhân vật không 'phẳng'?</h2>
                                        <p>Tôi đang luyện viết truyện ngắn và gặp khó khăn trong việc tạo ra nhân vật có chiều sâu, không bị rập khuôn. Làm sao để nhân vật của mình có mâu thuẫn nội tâm, có sự thay đổi (dù nhỏ) qua các biến cố? Mọi người chia sẻ bí quyết 'thổi hồn' vào nhân vật của mình nhé!</p>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>                              
                                <div class="postinfobot">

                                    <div class="likeblock pull-left">
                                        <a href="#" class="up"><i class="fa fa-thumbs-o-up"></i>25</a>
                                        <a href="#" class="down"><i class="fa fa-thumbs-o-down"></i>3</a>
                                    </div>

                                    <div class="prev pull-left">                                        
                                        <a href="#"><i class="fa fa-reply"></i></a>
                                    </div>

                                    <div class="posted pull-left"><i class="fa fa-clock-o"></i> Đăng lúc: 18:36pm @ 18/10/2025</div>

                                    <div class="next pull-right">                                        
                                        <a href="#"><i class="fa fa-share"></i></a>

                                        <a href="#"><i class="fa fa-flag"></i></a>
                                    </div>

                                    <div class="clearfix"></div>
                                </div>
                            </div><div class="paginationf">
                                <div class="pull-left"><a href="#" class="prevnext"><i class="fa fa-angle-left"></i></a></div>
                                <div class="pull-left">
                                    <ul class="paginationforum">
                                        <li class="hidden-xs"><a href="#" class="active">1</a></li>
                                        <li class="hidden-xs"><a href="#">2</a></li>
                                        <li class="hidden-xs"><a href="#">3</a></li>
                                        <li class="hidden-xs"><a href="#">4</a></li>
                                        <li class="hidden-xs"><a href="#">5</a></li>
                                        <li class="hidden-xs"><a href="#">6</a></li>
                                        <li class="hidden-xs"><a href="#" >7</a></li>
                                        <li class="hidden-xs"><a href="#">8</a></li>
                                        <li class="hidden-xs"><a href="#">9</a></li>
                                        <li class="hidden-xs"><a href="#">10</a></li>
                                        <li class="hidden-xs hidden-md"><a href="#">11</a></li>
                                        <li class="hidden-xs hidden-md"><a href="#">12</a></li>
                                        <li class="hidden-xs hidden-sm hidden-md"><a href="#">13</a></li>
                                    </ul>
                                </div>
                                <div class="pull-left"><a href="#" class="prevnext last"><i class="fa fa-angle-right"></i></a></div>
                                <div class="clearfix"></div>
                            </div>

                            <div class="post">
                                <div class="topwrap">
                                    <div class="userinfo pull-left">
                                        <a href="06_profile.html">
                                            <div class="avatar">
                                                <img src="images/avatar2.jpg" alt="" />
                                                <div class="status red">&nbsp;</div>
                                            </div>
                                        </a>

                                        <div class="icons">
                                            <img src="images/icon3.jpg" alt="" /><img src="images/icon4.jpg" alt="" /><img src="images/icon5.jpg" alt="" /><img src="images/icon6.jpg" alt="" />
                                        </div>
                                    </div>
                                    <div class="posttext pull-left">
                                        <p>Theo kinh nghiệm của mình, bạn nên bắt đầu bằng việc cho nhân vật một 'vết thương' hoặc một 'bí mật' từ quá khứ. Chính những điều này sẽ tạo ra mâu thuẫn bên trong, buộc họ phải hành động một cách phi logic hoặc bất ngờ trong hiện tại. Điều đó giúp nhân vật 'thật' hơn nhiều!</p>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>                              
                                <div class="postinfobot">

                                    <div class="likeblock pull-left">
                                        <a href="#" class="up"><i class="fa fa-thumbs-o-up"></i>10</a>
                                        <a href="#" class="down"><i class="fa fa-thumbs-o-down"></i>1</a>
                                    </div>

                                    <div class="prev pull-left">                                        
                                        <a href="#"><i class="fa fa-reply"></i></a>
                                    </div>

                                    <div class="posted pull-left"><i class="fa fa-clock-o"></i> Đăng lúc: 10:36am @ 19/10/2025</div>

                                    <div class="next pull-right">                                        
                                        <a href="#"><i class="fa fa-share"></i></a>

                                        <a href="#"><i class="fa fa-flag"></i></a>
                                    </div>

                                    <div class="clearfix"></div>
                                </div>
                            </div><div class="post">
                                <div class="topwrap">
                                    <div class="userinfo pull-left">
                                        <a href="06_profile.html">
                                            <div class="avatar">
                                                <img src="images/avatar3.jpg" alt="" />
                                                <div class="status red">&nbsp;</div>
                                            </div>
                                        </a>

                                        <div class="icons">
                                            <img src="images/icon3.jpg" alt="" /><img src="images/icon4.jpg" alt="" /><img src="images/icon5.jpg" alt="" /><img src="images/icon6.jpg" alt="" />
                                        </div>
                                    </div>
                                    <div class="posttext pull-left">

                                        <blockquote>
                                            <span class="original">Bản gốc được đăng bởi - StoryTeller:</span>
                                            Chia sẻ hay quá! Thử áp dụng 'vết thương' tâm lý xem sao.
                                        </blockquote>
                                        <p>Hoặc bạn có thể cho nhân vật một **mục tiêu rõ ràng nhưng lại có những giới hạn đạo đức/xã hội** cản trở họ. Ví dụ: Rất muốn thành công nhưng lại quá lương thiện để dùng thủ đoạn. Chính sự giằng xé đó sẽ khiến nhân vật trở nên 'tròn' và đáng nhớ hơn. Đừng ngại cho nhân vật phạm sai lầm!</p>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>                              
                                <div class="postinfobot">

                                    <div class="likeblock pull-left">
                                        <a href="#" class="up"><i class="fa fa-thumbs-o-up"></i>55</a>
                                        <a href="#" class="down"><i class="fa fa-thumbs-o-down"></i>12</a>
                                    </div>

                                    <div class="prev pull-left">                                        
                                        <a href="#"><i class="fa fa-reply"></i></a>
                                    </div>

                                    <div class="posted pull-left"><i class="fa fa-clock-o"></i> Đăng lúc: 12:36pm @ 19/10/2025</div>

                                    <div class="next pull-right">                                        
                                        <a href="#"><i class="fa fa-share"></i></a>

                                        <a href="#"><i class="fa fa-flag"></i></a>
                                    </div>

                                    <div class="clearfix"></div>
                                </div>
                            </div><div class="post">
                                <form action="#" class="form" >
                                    <div class="topwrap">
                                        <div class="userinfo pull-left">
                                            <a id="reply-profile-link" href="06_profile.html">
                                                <div class="avatar">
                                                    <img id="reply-user-avatar" src="images/avatar4.jpg" alt="" />
                                                    <div class="status red">&nbsp;</div>
                                                </div>
                                            </a>

                                            <div class="icons">
                                                <img src="images/icon3.jpg" alt="" /><img src="images/icon4.jpg" alt="" /><img src="images/icon5.jpg" alt="" /><img src="images/icon6.jpg" alt="" />
                                            </div>
                                        </div>
                                        <div class="posttext pull-left">
                                            <div class="textwraper">
                                                <div class="postreply">Bình luận:</div>
                                                <textarea name="reply" id="reply" placeholder="Nhập bình luận của bạn"></textarea>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>                              
                                    <div class="postinfobot">

                                        <div class="notechbox pull-left">
                                            <input type="checkbox" name="note" id="note" class="form-control" />
                                        </div>

                                        <div class="pull-left">
                                            <label for="note"> Gửi email cho tôi khi có ai đó phản hồi</label>
                                        </div>

                                        <div class="pull-right postreply">
                                            <div class="pull-left smile"><a href="#"><i class="fa fa-smile-o"></i></a></div>
                                            <div class="pull-left"><button class="btn btn-primary">Post Reply</button></div>
                                            <div class="clearfix"></div>
                                        </div>


                                        <div class="clearfix"></div>
                                    </div>
                                </form>
                            </div></div>
                        <div class="col-lg-4 col-md-4">

                            <div class="sidebarblock">
                                <h3>Thể loại</h3>
                                <div class="divline"></div>
                                <div class="blocktxt">
                                    <ul class="cats">
                                        <li><a href="#">Văn học <span class="badge pull-right">0</span></a></li>
                                        <li><a href="#">Giải đáp thắc mắc <span class="badge pull-right">0</span></a></li>
                                        <li><a href="#">Tâm sự <span class="badge pull-right">0</span></a></li>
                                        <li><a href="#">Giải bài tập <span class="badge pull-right">0</span></a></li>
                                        <li><a href="#">Chia sẻ tài liệu <span class="badge pull-right">0</span></a></li>
                                        <li><a href="#">Tips học bài hiệu quả <span class="badge pull-right">0</span></a></li>
                                        <li><a href="#">Tìm người dạy kèm <span class="badge pull-right">0</span></a></li>
                                        <li><a href="#">Tìm gia sư <span class="badge pull-right">0</span></a></li>
                                        <li><a href="#">Không xác định <span class="badge pull-right">1</span></a></li>
                                    </ul>
                                </div>
                            </div>


                        </div>
                    </div>
                </div>



                <div class="container">
                    <div class="row">
                        <div class="col-lg-8">
                            <div class="pull-left"><a href="#" class="prevnext"><i class="fa fa-angle-left"></i></a></div>
                            <div class="pull-left">
                                <ul class="paginationforum">
                                        <li class="hidden-xs"><a href="#" class="active">1</a></li>
                                        <li class="hidden-xs"><a href="#">2</a></li>
                                        <li class="hidden-xs"><a href="#">3</a></li>
                                        <li class="hidden-xs"><a href="#">4</a></li>
                                        <li class="hidden-xs"><a href="#">5</a></li>
                                        <li class="hidden-xs"><a href="#">6</a></li>
                                        <li class="hidden-xs"><a href="#" >7</a></li>
                                        <li class="hidden-xs"><a href="#">8</a></li>
                                        <li class="hidden-xs"><a href="#">9</a></li>
                                        <li class="hidden-xs"><a href="#">10</a></li>
                                        <li class="hidden-xs hidden-md"><a href="#">11</a></li>
                                        <li class="hidden-xs hidden-md"><a href="#">12</a></li>
                                        <li class="hidden-xs hidden-sm hidden-md"><a href="#">13</a></li>
                                    </ul>
                            </div>
                            <div class="pull-left"><a href="#" class="prevnext last"><i class="fa fa-angle-right"></i></a></div>
                            <div class="clearfix"></div>                        
                        </div>
                    </div>
                </div>

            </section>

            <footer>
                <div class="container">
                    <div class="row">
                        <div class="col-lg-1 col-xs-3 col-sm-2 logo "><a href="#"><img src="images/logo.jpg" alt=""  /></a></div>
                        <div class="col-lg-8 col-xs-9 col-sm-5 ">© 2025 hopvan.netlify.app</div>
                        <div class="col-lg-3 col-xs-12 col-sm-5 sociconcent">
                        </div>
                    </div>
                </div>
            </footer>
        </div>

    </body>

    <script type="module">
  // 1. Import các hàm cần thiết
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"; 

  // 2. Cấu hình Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyAJ9C2biYeiLPmhakzLZ4mEqfO9_VgPSZE",
    authDomain: "hopvan-9a648.firebaseapp.com",
    databaseURL: "https://hopvan-9a648-default-rtdb.firebaseio.com", 
    projectId: "hopvan-9a648",
    storageBucket: "hopvan-9a648.appspot.com",
    messagingSenderId: "429347196227",
    appId: "1:429347196227:web:917b8d019f0efd0f7833f6"
  };

  // 3. Khởi tạo Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  // const db = getFirestore(app); 

  // Lấy các phần tử cần cập nhật
  const userSection = document.querySelector('.headernav .avt');
  
  // Lấy các phần tử Avatar trong Form trả lời
  const replyAvatar = document.getElementById('reply-user-avatar');
  const replyLink = document.getElementById('reply-profile-link');
  
  // 4. Lắng nghe sự thay đổi trạng thái đăng nhập
  onAuthStateChanged(auth, user => {
    if (user) {
      // --- NẾU NGƯỜI DÙNG ĐÃ ĐĂNG NHẬP ---
      const photoURL = user.photoURL || 'images/avatar.jpg'; 
      const displayName = user.displayName || user.email.split('@')[0];

      // Cập nhật HEADER (Thêm link 06_profile.html)
      userSection.innerHTML = `
        <div class="stnt pull-left">                            
            <form action='03_new_topic.html' class="form">
                <button class="btn btn-primary">Tạo Topic mới</button>
            </form>
        </div>
        <div class="env pull-left"><i class="fa fa-envelope"></i></div>

        <div class="avatar pull-left dropdown">
            <a data-toggle="dropdown" href="06_profile.html"> <img src="${photoURL}" alt="${displayName}" />
            </a> <b class="caret"></b>
            <div class="status green">&nbsp;</div>
            <ul class="dropdown-menu" role="menu">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="06_profile.html">Trang cá nhân của ${displayName}</a></li> <li role="presentation"><a role="menuitem" tabindex="-2" href="#">Hộp thư</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-3" href="#" id="logout-button">Đăng xuất</a></li>
            </ul>
        </div>
        <div class="clearfix"></div>
      `;
      
      // Cập nhật Avatar và Link trong FORM TRẢ LỜI
      if (replyAvatar) {
          replyAvatar.src = photoURL;
          replyAvatar.alt = displayName;
      }
      if (replyLink) {
          replyLink.href = '06_profile.html';
      }

      // Thêm sự kiện click cho nút đăng xuất vừa tạo
      document.getElementById('logout-button').addEventListener('click', (e) => {
        e.preventDefault();
        signOut(auth).then(() => {
          window.location.reload(); 
        }).catch(error => {
          console.error('Sign out error', error);
        });
      });

    } else {
      // --- NẾU NGƯỜI DÙNG CHƯA ĐĂNG NHẬP ---
      // Cập nhật HEADER (Link về log.html)
      userSection.innerHTML = `
        <div class="stnt pull-left">                            
            <a href="log.html" class="btn btn-primary">Đăng nhập để tạo Topic</a>
        </div>
        <div class="avatar pull-left dropdown">
            <a data-toggle="dropdown" href="log.html"><img src="images/avatar.jpg" alt="" /></a> <b class="caret"></b>
            <ul class="dropdown-menu" role="menu">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="log.html">Đăng nhập</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-4" href="04_new_account.html">Tạo tài khoản</a></li>
            </ul>
        </div>
        <div class="clearfix"></div>
      `;
      
      // Cập nhật Avatar và Link trong FORM TRẢ LỜI về mặc định / log.html
      if (replyAvatar) {
          replyAvatar.src = 'images/avatar4.jpg'; // Avatar mặc định
          replyAvatar.alt = '';
      }
      if (replyLink) {
          replyLink.href = '05_login.html'; // Hoặc log.html nếu bạn dùng file đó
      }
    }
  });
</script>
</html>