<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Header</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600&display=swap" rel="stylesheet">
  <style>
/* Reset v√† font c∆° b·∫£n */
body {
  margin: 0;
  font-family: 'Montserrat', sans-serif;
  background-color: #fff;
  zoom: 96%;
}

/* üîπ Thanh tr√™n c√πng (Topbar) */
.topbar {
  background-color: #f8f8f8;
  font-size: 12px;
  color: #333;
  display: flex;
  justify-content: space-between;
  padding: 6px 20px;
  align-items: center;
  flex-wrap: wrap;
}

.topbar .left,
.topbar .right {
  display: flex;
  gap: 15px;
  align-items: center;
}

.topbar .social-icons {
  display: flex;
  gap: 10px;
  align-items: center;
}

.topbar .social-icons img {
  width: 20px;
  height: 20px;
  object-fit: contain;
}

.topbar .label {
  font-weight: 500;
  color: #444;
  font-size: 13px;
}

/* Banner */
.hero-banner {
  background-image: url('background.webp');
  background-size: cover;
  background-position: center;
  height: 310px;
  width: 100%;
}

@media (max-width: 768px) {
  .hero-banner {
    height: 140px;
  }
}

/* üîπ Navigation (ƒê√É S·ª¨A L·ªñI CƒÇN GI·ªÆA V√Ä STICKY) */
nav {
  display: flex;
  width: 100%; /* ƒê·∫£m b·∫£o chi·∫øm to√†n b·ªô chi·ªÅu r·ªông ƒë·ªÉ cƒÉn gi·ªØa */
  gap: 10px;
  padding: 10px 0;
  justify-content: center; /* ‚¨ÖÔ∏è L·ªÜNH QUAN TR·ªåNG: CƒÉn gi·ªØa c√°c m·ª•c menu */
  flex-wrap: wrap;
  
  /* N·∫øu b·∫°n mu·ªën menu d√≠nh c·ªë ƒë·ªãnh khi cu·ªôn */
  position: sticky; 
  top: 0;
  z-index: 1000;
  background-color: #fff; /* ƒê·∫£m b·∫£o kh√¥ng nh√¨n th·∫•y n·ªôi dung ph√≠a d∆∞·ªõi */
}

nav a {
  text-decoration: none;
  font-size: 13px;
  font-weight: 600;
  color: #222;
  padding: 11px 17px;
  transition: color 0.3s ease;
  text-transform: uppercase;
}

nav a:hover,
nav a.active {
  color: #fca96a; 
}

/* üîπ Header (Ch·ª©a Logo v√† User Info) */
header {
  display: flex;
  align-items: center;
  justify-content: space-between; /* ƒê·∫©y Logo sang tr√°i, User Info sang ph·∫£i */
  padding: 10px 30px; 
  background-color: #ffffff; 
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  width: 100%;
  position: relative; /* D√πng position:relative thay v√¨ sticky ƒë·ªÉ tr√°nh xung ƒë·ªôt v·ªõi nav */
  z-index: 999;
}

/* Logo ·ªü b√™n tr√°i */
.logo-left {
    flex-shrink: 0; 
    margin-right: 20px;
}

.logo-left img {
    height: 50px; /* ƒêi·ªÅu ch·ªânh k√≠ch th∆∞·ªõc logo */
    vertical-align: middle;
}

/* Header Right (Th√¥ng tin ng∆∞·ªùi d√πng) */
.header-right {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: flex-end; 
    margin-left: 20px;
}

/* Thanh g·∫°ch d∆∞·ªõi */
.nav-underline {
  width: 1010px;              
  height: 2px;
  background-color: #fca96a; 
  margin: 0 auto 15px auto;  
  border-radius: 2px;
}

/* üîπ Style chung cho Header Button */
.header-button {
  display: flex;
  align-items: center;
  gap: 6px;
  background: #fca96a;
  padding: 6px 12px;
  border-radius: 24px;
  font-size: 12px;
  font-weight: 600;
  color: #ffffff;
  text-decoration: none;
  transition: background 0.2s ease;
}

.header-button:hover {
  background: #ff9d59;
}

/* üîπ Dropdown v√† User Info */
.user-info-dropdown {
    position: relative;
    display: flex; 
    align-items: center;
    cursor: pointer; 
    padding: 5px 10px; 
    border-radius: 9999px; 
    transition: background-color 0.2s ease;
}
.user-profile-pic {
    width: 32px; 
    height: 32px; 
    border-radius: 50%; 
    border: 2px solid #fff;
    object-fit: cover;
    margin-right: 8px; 
}
.user-name {
    color: #333; /* ƒê·ªïi m√†u t√™n ng∆∞·ªùi d√πng sang ƒëen */
    font-weight: 600;
    font-size: 0.9rem;
    white-space: nowrap; 
    overflow: hidden; 
    text-overflow: ellipsis; 
    max-width: 120px;
}
.dropdown-content {
    display: none;
    position: absolute;
    top: 100%; 
    right: 0;
    margin-top: 10px;
    background-color: #fff;
    box-shadow: 0 6px 18px rgba(0,0,0,0.15);
    border-radius: 0.5rem;
    z-index: 1000;
    min-width: 180px;
    text-align: left;
    padding: 5px 0;
    border: 1px solid #eee;
}
.user-info-dropdown:hover .dropdown-content {
    display: block;
}
.dropdown-content a {
    color: #333;
    padding: 10px 15px;
    text-decoration: none;
    display: flex; 
    align-items: center;
    font-size: 1rem;
    font-weight: 500;
}
.dropdown-content a:hover {
    background-color: #f5f5f5;
}
.dropdown-content a#signout-link {
    color: #fca96a; 
    font-weight: 600;
}
.dropdown-content a#signout-link:hover {
    background-color: #fbecec; 
    color: #ff923e; 
}
.dropdown-content a svg {
    margin-right: 8px; 
    width: 20px;
    height: 20px;
    stroke: currentColor; 
    stroke-width: 2;
}

/* üîπ Responsive */
@media (max-width: 768px) {
  .hero-banner {
    height: 140px;
  }
  
  header {
    flex-direction: column;
    align-items: center;
    padding: 10px;
  }
  
  .logo-left img {
    height: 40px;
  }

  .header-right {
    margin-top: 10px;
    display: flex; /* Hi·ªán l·∫°i n·∫øu b·∫°n ·∫©n ·ªü desktop */
  }

  nav a {
    font-size: 11.5px;
    padding: 6px 10px;
    line-height: 1.4;
  }

  nav {
    gap: 8px;
  }

  .nav-underline {
    width: 90%; /* Thu nh·ªè thanh line */
    max-width: 350px;
  }
  
  .topbar {
    flex-direction: column;
    gap: 6px;
    text-align: center;
  }

  .header-right {
    /* ƒê·∫£m b·∫£o n√∫t ƒëƒÉng nh·∫≠p hi·ªÉn th·ªã tr√™n mobile */
    display: flex;
    justify-content: center;
    width: 100%;
  }
}

/* üîπ Navigation Links */
/* Thi·∫øt l·∫≠p c∆° b·∫£n */
nav a {
  text-decoration: none;
  font-size: 13px;
  font-weight: 600;
  color: #222 !important; /* M√ÄU CH·ªÆ B√åNH TH∆Ø·ªúNG: ƒêen (D√πng !important ƒë·ªÉ ƒë·∫£m b·∫£o) */
  padding: 11px 17px;
  transition: color 0.3s ease; 
  text-transform: uppercase;
  background-color: transparent !important; /* ƒê·∫£m b·∫£o kh√¥ng c√≥ n·ªÅn */
}

/* üîπ Hover Effect: Ch·ªØ chuy·ªÉn sang m√†u cam */
nav a:hover {
  color: #fca96a !important; /* M√ÄU HOVER: Cam */
  background-color: transparent !important; 
}

/* üîπ Active (Link ƒëang ƒë∆∞·ª£c ch·ªçn) */
nav a.active {
  color: #fca96a !important; /* M√ÄU ACTIVE: Cam */
  background-color: transparent !important;
}
</style>
</head>
<body>

  <header>

    <div class="logo-left"> 
        <a href="index.html">
            <img src="LOGO2.WEBP" alt="FPC Logo" />
        </a>
    </div>

    <nav>
        <a href="../../index.html">TRANG CH·ª¶</a>
        <a href="../" class="active">NG√ÇN H√ÄNG KI·∫æN TH·ª®C</a>
        <a href="../../phongluyenviet/">PH√íNG LUY·ªÜN VI·∫æT</a>
        <a href="../../congdongvanhoc/">C·ªòNG ƒê·ªíNG VƒÇN H·ªåC</a>
        <a href="../../game">GAME HO√Å & H√ÄNH TR√åNH H·ªåC T·∫¨P</a>
    </nav>
    
    <div class="header-right">
        <div id="user-info">
            <a href="../profile.html" class="header-button" title="T√†i kho·∫£n" id="login-button">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3">
                    <circle cx="12" cy="7" r="4"/>
                    <path d="M5.5 21a8.38 8.38 0 0 1 13 0"/>
                </svg>
            </a>
        </div>
    </div>

</header>


<script>
  window.addEventListener("DOMContentLoaded", () => {
    const dateEl = document.getElementById("today-date");
    const days = ['Ch·ªß nh·∫≠t', 'Th·ª© hai', 'Th·ª© ba', 'Th·ª© t∆∞', 'Th·ª© nƒÉm', 'Th·ª© s√°u', 'Th·ª© b·∫£y'];
    const now = new Date();
    const d = days[now.getDay()];
    const dd = String(now.getDate()).padStart(2, '0');
    const mm = String(now.getMonth() + 1).padStart(2, '0');
    const yyyy = now.getFullYear();
    if (dateEl) dateEl.textContent = `${d}, ${dd}/${mm}/${yyyy}`;

    const weatherEl = document.getElementById("weather");
    const apiKey = "690a85c2c5a1c616182d714f85ff119b";
    const lat = 10.037, lon = 105.788;

    const url = `https://corsproxy.io/?https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric&lang=vi`;

    fetch(url)
      .then(res => {
        if (!res.ok) throw new Error("API l·ªói");
        return res.json();
      })
      .then(data => {
        const temp = Math.round(data.main.temp);
        const desc = data.weather[0].description;
        if (weatherEl) weatherEl.textContent = `C·∫ßn Th∆° ${temp}¬∞C, ${desc}`;
      })
      .catch(err => {
        console.error("‚ùå Kh√¥ng l·∫•y ƒë∆∞·ª£c th·ªùi ti·∫øt:", err);
        if (weatherEl) weatherEl.textContent = "Kh√¥ng l·∫•y ƒë∆∞·ª£c th·ªùi ti·∫øt";
      });
  });
</script>

<script type="module">
    // ... Kh·ªüi t·∫°o Firebase App v√† import c√°c module nh∆∞ ƒë√£ h∆∞·ªõng d·∫´n ...
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"; 

    const firebaseConfig = {
      apiKey: "AIzaSyAJ9C2biYeiLPmhakzLZ4mEqfO9_VgPSZE",
      authDomain: "hopvan-9a648.firebaseapp.com",
      projectId: "hopvan-9a648",
      storageBucket: "hopvan-9a648.appspot.com",
      messagingSenderId: "429347196227",
      appId: "1:429347196227:web:917b8d019f0efd0f7833f6",
      measurementId: "G-1BG8PSRG0R"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app); 
    const userInfoContainer = document.getElementById('user-info');

    function handleSignOut() {
        signOut(auth).then(() => {
            console.log("ƒêƒÉng xu·∫•t th√†nh c√¥ng");
            window.location.reload(); 
        }).catch((error) => {
            console.error("L·ªói ƒëƒÉng xu·∫•t:", error);
            alert("ƒêƒÉng xu·∫•t th·∫•t b·∫°i. Vui l√≤ng th·ª≠ l·∫°i.");
        });
    }

    onAuthStateChanged(auth, (user) => {
        if (user) {
            const userName = user.displayName || user.email.split('@')[0] || "Ng∆∞·ªùi d√πng";
            // S·ª≠ d·ª•ng m·ªôt ·∫£nh placeholder chung n·∫øu user.photoURL kh√¥ng t·ªìn t·∫°i
            const photoURL = user.photoURL || 'https://via.placeholder.com/32/FFC291/FFFFFF?text=' + (userName ? userName.charAt(0).toUpperCase() : 'U'); 

            userInfoContainer.innerHTML = `
                <div class="user-info-dropdown">
                    <img src="${photoURL}" alt="·∫¢nh ƒë·∫°i di·ªán" class="user-profile-pic" title="${userName}">
                    <span class="user-name">${userName}</span>
                    <div class="dropdown-content">
                        <a href="#">Ch√†o, ${userName.split(' ')[0]}</a>
                        <a href="#">Qu·∫£n l√Ω t√†i kho·∫£n</a>
                        <a href="#" id="signout-link">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-out">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            ƒêƒÉng xu·∫•t
                        </a>
                    </div>
                </div>
            `;

            document.getElementById('signout-link').addEventListener('click', (e) => {
                e.preventDefault();
                handleSignOut();
            });

        } else {
            userInfoContainer.innerHTML = `
                <a href="login/index.html" class="header-button" title="ƒêƒÉng nh·∫≠p" id="login-button">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3">
                        <circle cx="12" cy="7" r="4"/>
                        <path d="M5.5 21a8.38 8.38 0 0 1 13 0"/>
                    </svg>
                </a>
            `;
        }
    });
</script>
</body>
</html>