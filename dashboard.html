<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hopvan - Bảng điều khiển</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #FF8F50;
            --primary-gradient: linear-gradient(135deg, #FF8F50, #FF5E62);
            --text-main: #2D3436;
            --text-light: #636E72;
            --glass-bg: rgba(255, 255, 255, 0.6);
            --glass-border: rgba(255, 255, 255, 0.8);
            --blur: 25px;
            --sidebar-width: 260px;
            --discord-color: #5865F2;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; }

        body {
            background-color: #FFF5EC;
            height: 100vh;
            overflow: hidden;
            display: flex;
        }

        /* --- BACKGROUND BLOBS --- */
        .background-blobs { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .blob { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.6; animation: floatBlob 10s infinite alternate; }
        .blob-1 { width: 500px; height: 500px; background: #FCA96A; top: -100px; left: -100px; }
        .blob-2 { width: 400px; height: 400px; background: #FCD5B5; bottom: -50px; right: -50px; animation-delay: -5s; }
        @keyframes floatBlob { 0% { transform: translate(0, 0); } 100% { transform: translate(30px, 50px); } }

        /* --- LAYOUT --- */
        .dashboard-container { display: flex; width: 100%; height: 100%; padding: 20px; gap: 20px; position: relative; }

        /* --- SIDEBAR --- */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--glass-bg);
            backdrop-filter: blur(var(--blur));
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            padding: 30px 20px;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 100;
            box-shadow: 0 10px 30px rgba(0,0,0,0.02);
        }

        .logo { display: flex; align-items: center; gap: 12px; margin-bottom: 40px; text-decoration: none; padding-left: 10px; }
        .logo span { font-size: 1.5rem; font-weight: 800; background: var(--primary-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        .menu-list { list-style: none; display: flex; flex-direction: column; gap: 8px; flex: 1; }
        .menu-item {
            display: flex; align-items: center; gap: 15px; padding: 14px 20px;
            border-radius: 14px; color: var(--text-light); font-weight: 600; font-size: 0.95rem;
            cursor: pointer; transition: all 0.3s; text-decoration: none; position: relative; overflow: hidden;
        }
        .menu-item i { width: 20px; text-align: center; font-size: 1.1rem; transition: 0.3s; }
        .menu-item:hover { background: rgba(255, 143, 80, 0.1); color: var(--primary); }
        .menu-item.active { background: var(--primary-gradient); color: white; box-shadow: 0 5px 15px rgba(255, 94, 98, 0.3); }
        .menu-item.active i { transform: scale(1.1); }

        .logout-btn {
            margin-top: auto; display: flex; align-items: center; gap: 12px; padding: 15px 20px;
            color: #FF5E62; font-weight: 700; cursor: pointer; border: 1px solid rgba(255, 94, 98, 0.2);
            background: rgba(255, 255, 255, 0.5); border-radius: 14px; transition: all 0.3s;
        }
        .logout-btn:hover { background: #FF5E62; color: white; border-color: transparent; }

        /* Overlay cho Mobile Sidebar */
        .sidebar-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.3); backdrop-filter: blur(3px);
            z-index: 90; display: none; opacity: 0; transition: opacity 0.3s;
        }
        .sidebar-overlay.active { display: block; opacity: 1; }

        /* --- MAIN CONTENT --- */
        .main-content {
            flex: 1;
            background: var(--glass-bg);
            backdrop-filter: blur(var(--blur));
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 30px 40px;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.02);
            -webkit-overflow-scrolling: touch;
        }

        /* User Header */
        .user-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .welcome-text h2 { font-size: 2rem; color: var(--text-main); margin-bottom: 5px; }
        .welcome-text p { color: var(--text-light); font-size: 1rem; }
        .user-avatar {
            width: 55px; height: 55px; background: var(--primary-gradient);
            border-radius: 18px; display: flex; justify-content: center; align-items: center;
            color: white; font-weight: 800; font-size: 1.4rem;
            box-shadow: 0 8px 20px rgba(255, 143, 80, 0.3);
            transform: rotate(-5deg);
        }

        /* --- SECTIONS --- */
        .content-section { display: none; animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
        .content-section.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- OVERVIEW COMPONENTS --- */
        
        /* 1. Stats Grid */
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .stat-card {
            background: white; padding: 25px; border-radius: 24px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.02); transition: transform 0.3s;
            border: 1px solid rgba(0,0,0,0.03); display: flex; flex-direction: column; justify-content: space-between;
        }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .stat-card h3 { font-size: 0.95rem; color: var(--text-light); margin-bottom: 10px; display: flex; align-items: center; gap: 8px;}
        .stat-card .value { font-size: 2.2rem; font-weight: 800; color: var(--text-main); line-height: 1; }
        .stat-card .unit { font-size: 0.9rem; color: var(--primary); font-weight: 700; margin-top: 5px; }

        /* 2. Banner CTA (Đã thêm Hover xịn) */
        .banner-cta {
            background: var(--primary-gradient); padding: 40px; border-radius: 30px; color: white;
            text-align: center; position: relative; overflow: hidden; margin-bottom: 30px;
            box-shadow: 0 15px 30px rgba(255, 94, 98, 0.25);
            /* Transition cho hiệu ứng hover */
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background-size: 200% 200%;
            animation: gradientMove 5s ease infinite;
        }
        
        /* Hiệu ứng nổi lên khi hover */
        .banner-cta:hover {
            transform: translateY(-8px) scale(1.01);
            box-shadow: 0 25px 50px rgba(255, 94, 98, 0.4);
        }

        .banner-decor { 
            position: absolute; right: 20px; bottom: -20px; font-size: 8rem; 
            opacity: 0.2; transform: rotate(-20deg);
            transition: all 0.5s ease;
        }
        /* Hiệu ứng tên lửa bay lên khi hover */
        .banner-cta:hover .banner-decor {
            transform: rotate(-30deg) translate(10px, -20px) scale(1.1);
            opacity: 0.3;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* 3. Section Title */
        .section-h3 { font-size: 1.2rem; font-weight: 800; color: var(--text-main); margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }

        /* 4. Quick Access Grid */
        .quick-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }
        .work-card {
            background: white; border: 1px solid rgba(0,0,0,0.05);
            border-radius: 20px; padding: 20px; text-align: center; cursor: pointer; transition: 0.3s;
            display: flex; flex-direction: column; align-items: center; justify-content: center; height: 130px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.02);
        }
        .work-card:hover { border-color: var(--primary); transform: translateY(-5px); box-shadow: 0 15px 30px rgba(255, 143, 80, 0.15); }
        .work-icon { 
            width: 50px; height: 50px; background: #FFF5EC; border-radius: 50%; color: var(--primary);
            display: flex; justify-content: center; align-items: center; font-size: 1.5rem; margin-bottom: 10px;
        }
        .work-card span { font-weight: 700; font-size: 0.95rem; color: var(--text-main); }

        /* 5. Split Section (Activity & Quote) */
        .split-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 25px; margin-bottom: 30px; }
        
        .activity-box {
            background: white; padding: 25px; border-radius: 24px; border: 1px solid rgba(0,0,0,0.05);
        }
        
        /* Đồng hồ SVG */
        .code-clock { width: 28px; height: 28px; display: inline-block; vertical-align: middle; margin-right: 8px; }
        .clock-face { fill: none; stroke: var(--text-main); stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
        .clock-hour { stroke: var(--primary); stroke-width: 2.5; stroke-linecap: round; transform-origin: 12px 12px; transform: rotate(90deg); }
        .clock-minute { stroke: var(--text-light); stroke-width: 2; stroke-linecap: round; transform-origin: 12px 12px; animation: clockSpin 6s linear infinite; }
        .clock-center { fill: var(--primary); }
        @keyframes clockSpin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .activity-list { list-style: none; margin-top: 10px; }
        .activity-item {
            display: flex; align-items: center; gap: 15px; padding: 15px 0; border-bottom: 1px solid #f0f0f0;
        }
        .activity-item:last-child { border-bottom: none; }
        .act-icon { 
            width: 45px; height: 45px; background: #e3f2fd; border-radius: 12px; 
            display: flex; justify-content: center; align-items: center; color: #2196f3; 
        }
        .act-icon.orange { background: #fff3e0; color: #ff9800; }
        .act-icon.green { background: #e8f5e9; color: #4caf50; }
        .act-info h4 { font-size: 0.95rem; font-weight: 700; margin-bottom: 3px; }
        .act-info p { font-size: 0.8rem; color: var(--text-light); }
        .act-status { margin-left: auto; font-weight: 700; font-size: 0.9rem; }

        .quote-box {
            background: linear-gradient(135deg, #fff 0%, #fffbf5 100%);
            border: 1px solid rgba(0,0,0,0.05); border-left: 5px solid var(--primary);
            padding: 30px; border-radius: 24px; position: relative;
            display: flex; flex-direction: column; justify-content: center;
        }
        .quote-text { font-style: italic; font-size: 1.1rem; color: var(--text-main); margin-bottom: 20px; line-height: 1.6; z-index: 2; }
        .quote-author { font-weight: 800; color: var(--primary); text-align: right; z-index: 2; }
        .quote-bg-icon { position: absolute; top: 20px; left: 20px; font-size: 4rem; color: rgba(255, 143, 80, 0.1); z-index: 1; }

        /* 6. Tips Section */
        .tips-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .tip-card {
            background: white; padding: 20px; border-radius: 20px; display: flex; align-items: center; gap: 15px;
            cursor: pointer; transition: 0.3s; border: 1px solid rgba(0,0,0,0.05);
        }
        .tip-card:hover { transform: translateX(5px); border-color: var(--primary); }
        .tip-img { width: 60px; height: 60px; border-radius: 12px; object-fit: cover; }
        .tip-content h4 { font-weight: 700; font-size: 1rem; margin-bottom: 5px; }
        .tip-content p { font-size: 0.85rem; color: var(--text-light); }

        /* 7. Community Banner */
        .community-banner {
            position: relative; background: linear-gradient(135deg, #5865F2 0%, #7289da 100%);
            border-radius: 30px; padding: 40px; color: white; overflow: hidden;
            box-shadow: 0 20px 40px rgba(88, 101, 242, 0.25); display: flex; flex-direction: column;
            align-items: center; text-align: center; border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .com-float-icon { position: absolute; font-size: 2rem; opacity: 0.15; animation: floatUp 6s infinite linear; user-select: none; }
        .cf-1 { top: 80%; left: 10%; animation-delay: 0s; font-size: 3rem; }
        .cf-2 { top: 90%; right: 15%; animation-delay: 2s; font-size: 2.5rem; }
        .cf-3 { top: 60%; left: 80%; animation-delay: 4s; font-size: 2rem; }
        .cf-4 { top: 70%; left: 20%; animation-delay: 1s; font-size: 1.5rem; }
        @keyframes floatUp { 0% { transform: translateY(0) rotate(0deg); opacity: 0.1; } 50% { opacity: 0.3; } 100% { transform: translateY(-150px) rotate(20deg); opacity: 0; } }
        .com-content { position: relative; z-index: 2; width: 100%; max-width: 600px; }
        .com-title { font-size: 2rem; font-weight: 800; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .com-desc { font-size: 1.05rem; opacity: 0.9; margin-bottom: 25px; line-height: 1.6; }
        .join-discord-btn {
            background: white; color: #5865F2; padding: 14px 35px; border-radius: 50px;
            font-weight: 800; font-size: 1.1rem; text-decoration: none;
            display: inline-flex; align-items: center; gap: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15); transition: all 0.3s;
        }
        .join-discord-btn:hover { transform: scale(1.05); box-shadow: 0 15px 30px rgba(0,0,0,0.2); background: #fff; }

        /* 8. Practice Cards (Bento Style) */
        .practice-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-top: 20px; }
        .practice-card {
            border-radius: 30px; padding: 35px; position: relative; overflow: hidden; cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); display: flex; flex-direction: column;
            justify-content: space-between; height: 220px;
        }
        .practice-card:hover { transform: translateY(-8px); }
        
        .pc-random {
            background: linear-gradient(135deg, #FF8F50 0%, #FF5E62 100%); color: white;
            box-shadow: 0 15px 35px rgba(255, 94, 98, 0.3); border: none;
        }
        .pc-random:hover { box-shadow: 0 20px 45px rgba(255, 94, 98, 0.4); }
        .pc-random .pc-icon-bg { color: rgba(255, 255, 255, 0.15); }
        .pc-random .pc-btn-fake { background: rgba(255, 255, 255, 0.2); color: white; backdrop-filter: blur(5px); }

        .pc-topic {
            background: white; color: var(--text-main); border: 1px solid rgba(0,0,0,0.05);
            box-shadow: 0 15px 35px rgba(0,0,0,0.03);
        }
        .pc-topic:hover { box-shadow: 0 20px 45px rgba(255, 143, 80, 0.15); border-color: var(--primary); }
        .pc-topic .pc-icon-bg { color: rgba(255, 143, 80, 0.08); }
        .pc-topic .pc-btn-fake { background: #FFF5EC; color: var(--primary); }

        .pc-content { position: relative; z-index: 2; }
        .pc-title { font-size: 1.6rem; font-weight: 800; margin-bottom: 8px; line-height: 1.2; }
        .pc-desc { font-size: 0.95rem; opacity: 0.9; margin-bottom: 20px; max-width: 80%; }
        .pc-icon-bg { position: absolute; right: -20px; bottom: -30px; font-size: 9rem; transform: rotate(-15deg); transition: all 0.5s ease; z-index: 1; }
        .practice-card:hover .pc-icon-bg { transform: rotate(0deg) scale(1.1); right: -10px; }
        .pc-btn-fake { display: inline-flex; align-items: center; gap: 8px; padding: 10px 20px; border-radius: 50px; font-weight: 700; font-size: 0.9rem; width: fit-content; transition: 0.3s; }
        .practice-card:hover .pc-btn-fake { padding-right: 25px; }

        /* Modal */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.4); backdrop-filter: blur(5px); justify-content: center; align-items: center; animation: fadeIn 0.3s; }
        .modal-content { background: white; padding: 40px; border-radius: 30px; width: 90%; max-width: 800px; position: relative; animation: scaleUp 0.3s cubic-bezier(0.16, 1, 0.3, 1); border: 1px solid rgba(255,255,255,0.8); max-height: 90vh; overflow-y: auto; }
        @keyframes scaleUp { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .close-modal { position: absolute; top: 20px; right: 25px; font-size: 2rem; cursor: pointer; color: #999; }
        .topics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-top: 30px; }
        
        .topic-card { background: #ffffff; padding: 25px 15px; border-radius: 24px; text-align: center; cursor: pointer; transition: all 0.4s ease; border: 1px solid rgba(0,0,0,0.05); box-shadow: 0 5px 15px rgba(0,0,0,0.03); position: relative; overflow: hidden; }
        .topic-card:hover { transform: translateY(-8px); border-color: var(--primary); }
        .topic-icon { width: 70px; height: 70px; background: #FFF5EC; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin: 0 auto 15px; }
        .topic-card:hover .topic-icon { background: linear-gradient(135deg, #FF8F50, #FF5E62); }
        .topic-icon svg { width: 32px; height: 32px; fill: url(#icon-gradient); }
        .topic-card:hover .topic-icon svg { fill: white; }
        .topic-name { font-weight: 700; color: var(--text-main); display: block; }
        
        .menu-toggle { display: none; font-size: 1.5rem; color: var(--text-main); cursor: pointer; }

        /* Mobile */
        @media (max-width: 900px) { .stats-grid { grid-template-columns: 1fr; } .practice-grid, .two-col-grid { grid-template-columns: 1fr; } .quick-grid { grid-template-columns: repeat(2, 1fr); } .tips-grid { grid-template-columns: 1fr; } .split-grid { grid-template-columns: 1fr; } }
        @media (max-width: 768px) {
            .dashboard-container { padding: 10px; gap: 0; display: block; overflow-y: auto; }
            body { overflow: auto; display: block; }
            .sidebar { position: fixed; left: -100%; top: 0; height: 100%; width: 85%; max-width: 300px; box-shadow: 5px 0 30px rgba(0,0,0,0.1); border-radius: 0 20px 20px 0; } 
            .sidebar.active { left: 0; }
            .main-content { border-radius: 20px; padding: 20px 15px; min-height: 100vh; overflow: visible; }
            .menu-toggle { display: block; }
            .user-header { gap: 15px; }
            .modal-content { padding: 20px; width: 95%; margin: 10px; }
            .topics-grid { grid-template-columns: 1fr 1fr; gap: 15px; }
            .discord-card { padding: 30px 20px; }
            .discord-icon { width: 80px; height: 80px; font-size: 2.5rem; }
            
            /* Mobile adjustments */
            .practice-card { height: auto; padding: 30px; }
            .pc-icon-bg { font-size: 6rem; right: -10px; bottom: -10px; }
            .pc-desc { max-width: 100%; }
        }
    </style>
</head>
<body>

    <div class="background-blobs"><div class="blob blob-1"></div><div class="blob blob-2"></div></div>
    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <div class="dashboard-container">
        <aside class="sidebar" id="sidebar">
            <a href="" class="logo">
                <img src="LOGO.WEBP" alt="Logo" width="40">
                <span>HOPVAN</span>
            </a>

            <ul class="menu-list">
                <li class="menu-item active" onclick="switchTab('overview', this)"><i class="fas fa-home"></i> Tổng quan</li>
                <li class="menu-item" onclick="switchTab('news', this)"><i class="fas fa-newspaper"></i> Bản tin Văn học</li>
                <li class="menu-item" onclick="switchTab('community', this)"><i class="fas fa-users"></i> Cộng đồng Văn học</li>
                <li class="menu-item" onclick="switchTab('practice', this)"><i class="fas fa-pen-nib"></i> Phòng luyện đề</li>
                <li class="menu-item" onclick="switchTab('journal', this)"><i class="fas fa-book-journal-whills"></i> Nhật ký học tập</li>
            </ul>

            <button class="logout-btn" id="btn-logout"><i class="fas fa-sign-out-alt"></i> Đăng xuất</button>
        </aside>

        <main class="main-content">
            <div class="user-header">
                <div class="menu-toggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></div>
                <div class="welcome-text">
                    <h2 id="welcome-name">Xin chào...</h2>
                    <p>Hôm nay bạn muốn chinh phục tác phẩm nào?</p>
                </div>
                <div class="user-avatar" id="avatar-initial">H</div>
            </div>

            <div id="overview" class="content-section active">
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3><i class="fas fa-chart-line" style="color: #FF5E62;"></i> Trình độ</h3>
                        <div class="value">Level 1</div>
                        <div class="unit">Sơ cấp</div>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-file-alt" style="color: #FF9966;"></i> Đã làm</h3>
                        <div class="value">0</div>
                        <div class="unit">đề thi</div>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-fire" style="color: #e74c3c;"></i> Chuỗi</h3>
                        <div class="value">1</div>
                        <div class="unit">ngày liên tiếp</div>
                    </div>
                </div>
                
                <div class="banner-cta">
                    <div style="position: relative; z-index: 2;">
                        <h2 style="font-size: 1.8rem; margin-bottom: 10px; color: white;">Sẵn sàng bứt phá điểm số?</h2>
                        <p style="opacity: 0.9; margin-bottom: 20px;">Làm ngay một bài test để AI đánh giá năng lực của bạn.</p>
                        <button onclick="switchTab('practice', document.querySelectorAll('.menu-item')[3])" style="background: white; color: #FF5E62; padding: 12px 30px; border: none; border-radius: 50px; font-weight: 700; cursor: pointer; transition: 0.3s;">Vào phòng luyện</button>
                    </div>
                    <i class="fas fa-rocket banner-decor"></i>
                </div>

                <div class="split-grid">
                    <div class="activity-box">
                        <h3 style="font-weight: 800; margin-bottom: 20px; display: flex; align-items: center; color: var(--text-main);">
                            <svg class="code-clock" viewBox="0 0 24 24">
                                <circle class="clock-face" cx="12" cy="12" r="9" />
                                <line class="clock-hour" x1="12" y1="12" x2="12" y2="7" />
                                <line class="clock-minute" x1="12" y1="12" x2="12" y2="6" />
                                <circle class="clock-center" cx="12" cy="12" r="1.5" />
                            </svg>
                            Hoạt động gần đây
                        </h3>
                        <ul class="activity-list" id="activity-list">
                            <li style="text-align: center; color: #999; padding: 20px;">Đang tải dữ liệu...</li>
                        </ul>
                    </div>

                    <div class="quote-box">
                        <i class="fas fa-quote-left quote-bg-icon"></i>
                        <p class="quote-text">"Văn học là nhân học."</p>
                        <p class="quote-author">— Maxim Gorky</p>
                    </div>
                </div>

                <h3 class="section-h3"><i class="fas fa-lightbulb" style="color: #FF8F50;"></i> Bí kíp điểm cao</h3>
                <div class="tips-grid">
                    <div class="tip-card">
                        <img src="https://img.freepik.com/free-vector/creative-writing-concept-illustration_114360-8139.jpg" class="tip-img" alt="Tip">
                        <div class="tip-content"><h4>Cách viết mở bài gián tiếp</h4><p>3 công thức mở bài áp dụng cho mọi tác phẩm thơ.</p></div>
                    </div>
                    <div class="tip-card">
                        <img src="https://img.freepik.com/free-vector/writer-concept-illustration_114360-1490.jpg" class="tip-img" alt="Tip">
                        <div class="tip-content"><h4>Dẫn chứng NLXH "đắt giá"</h4><p>Tổng hợp 20 dẫn chứng mới nhất 2024.</p></div>
                    </div>
                </div>
            </div>

            <div id="community" class="content-section">
                <h2 style="margin-bottom: 20px; font-weight: 800; color: var(--text-main);">Cộng đồng Văn</h2>
                <div class="community-banner">
                    <i class="fas fa-heart com-float-icon cf-1"></i>
                    <i class="fas fa-comment-dots com-float-icon cf-2"></i>
                    <i class="fas fa-pen-nib com-float-icon cf-3"></i>
                    <i class="fas fa-book com-float-icon cf-4"></i>
                    <div class="com-content">
                        <div style="font-size: 4rem; margin-bottom: 15px;"><i class="fab fa-discord"></i></div>
                        <h2 class="com-title">Gia nhập Server Hopvan</h2>
                        <p class="com-desc">Không gian thảo luận sôi nổi với hơn <strong>10,000+ thành viên</strong>. Nơi chia sẻ tài liệu, chữa đề livestream và giải đáp thắc mắc 24/7.</p>
                        <a href="https://discord.gg/" target="_blank" class="join-discord-btn"><i class="fab fa-discord"></i> Tham gia ngay</a>
                    </div>
                </div>
            </div>

            <div id="practice" class="content-section">
                <h2 style="margin-bottom: 10px; font-weight: 800; color: var(--text-main); font-size: 1.5rem;">
                    <i class="fas fa-pen-nib" style="color: var(--primary); margin-right: 10px;"></i>Phòng Luyện Đề AI
                </h2>
                <p style="color: var(--text-light); margin-bottom: 30px;">Hệ thống chấm điểm và sửa lỗi tự động 24/7.</p>
                
                <div class="practice-grid">
                    <div class="practice-card pc-random" onclick="goToExam('random')">
                        <div class="pc-content">
                            <div class="pc-title">Luyện đề<br>Ngẫu nhiên</div>
                            <p class="pc-desc">Thử thách bản thân với đề bài bất kỳ từ kho dữ liệu.</p>
                            <span class="pc-btn-fake">Bắt đầu ngay <i class="fas fa-arrow-right"></i></span>
                        </div>
                        <i class="fas fa-dice pc-icon-bg"></i>
                    </div>

                    <div class="practice-card pc-topic" onclick="openTopicModal()">
                        <div class="pc-content">
                            <div class="pc-title">Chọn theo<br>Chủ đề</div>
                            <p class="pc-desc">Ôn tập chuyên sâu: Thơ Mới, Truyện Ngắn, Kịch...</p>
                            <span class="pc-btn-fake">Xem danh sách <i class="fas fa-list-ul"></i></span>
                        </div>
                        <i class="fas fa-layer-group pc-icon-bg"></i>
                    </div>
                </div>
            </div>

            <div id="news" class="content-section"><h2>Bản tin Văn học</h2><p>Coming soon...</p></div>
            <div id="journal" class="content-section"><h2>Nhật ký học tập</h2><p>Coming soon...</p></div>
        </main>
    </div>

    <div id="topicModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeTopicModal()">&times;</span>
            <svg width="0" height="0" style="position: absolute;"><defs><linearGradient id="icon-gradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#FF8F50;stop-opacity:1" /><stop offset="100%" style="stop-color:#FF5E62;stop-opacity:1" /></linearGradient></defs></svg>
            <h2 style="text-align: center; margin-bottom: 10px;">Chọn chủ đề ôn luyện</h2>
            <p style="text-align: center; color: var(--text-light); margin-bottom: 20px;">Bạn muốn ôn kỹ phần nào hôm nay?</p>
            <div class="topics-grid">
                <div class="topic-card" onclick="goToExam('tho')"><div class="topic-icon"><svg viewBox="0 0 512 512"><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2c-2.1 14.1-12.8 25.4-23.9 36.1C355.6 193.3 336 295.6 336 336c0 44.2-35.8 80-80 80c-23.7 0-44.9-10.4-59.2-26.9c-2.9-3.4-3.1-8.3-.3-11.8l38.2-47.7c3.4-4.2 3.6-10.1 .5-14.6L207 275.4c-3.1-4.5-9.1-6.1-14.1-3.7l-72.9 35c-2.7 1.3-5.7 1.6-8.6 .8L23.7 284.9c-8.9-2.3-11-14.4-3.3-19.6l76.7-52c3.1-2.1 5.4-5.3 6.3-9l34-136c1.6-6.3 8.3-9.9 14.3-7.7L320.1 113c4.1 1.5 8.7 .9 12.3-1.6L498.1 5.6zM240 384c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-62 31.6-117.2 79.5-150.3l12.1-8.3c5-3.5 11.8-2.3 15.3 2.7s2.3 11.8-2.7 15.3l-12.1 8.3C263.8 277 240 327.9 240 384zm-37.1 51.7L167.3 398.2c-2.2-2.8-5.7-4.1-9.2-3.6l-50.6 8.4c-8.7 1.4-14 10.8-9.3 17.8L121 455c13.7 20.6 36.9 33 61.6 33c3.7 0 7.3-.3 10.9-.8c6.9-1.1 11.3-8.2 9.4-14.9z"/></svg></div><span class="topic-name">Thơ & Thơ Mới</span></div>
                <div class="topic-card" onclick="goToExam('truyen')"><div class="topic-icon"><svg viewBox="0 0 576 512"><path d="M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"/></svg></div><span class="topic-name">Truyện Ngắn</span></div>
                <div class="topic-card" onclick="goToExam('ky')"><div class="topic-icon"><svg viewBox="0 0 512 512"><path d="M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"/></svg></div><span class="topic-name">Ký & Tùy Bút</span></div>
                <div class="topic-card" onclick="goToExam('kich')"><div class="topic-icon"><svg viewBox="0 0 640 512"><path d="M192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128zM32 224a160 160 0 1 0 320 0A160 160 0 1 0 32 224zm288 0c0 51.3-24.3 97-62 127c24.8 20.3 56.4 33 91.2 33c10.3 0 20.3-1.1 30.1-3.2c-5.1-13-7.9-27.1-7.9-41.9c0-64.5 48.7-117.6 111.4-124.9c-8.9-63.3-63.3-112.1-129-112.1c-13.7 0-26.9 2.1-39.3 6c1.6 6.9 2.5 14.1 2.5 21.5c0 52.3-41.8 94.6-94.1 94.6H192c-5.5 0-10.9-.5-16.1-1.3C223.1 228.3 256 235.1 256 256c0 14.1-13.6 27.2-28 35.8c-24.1 14.4-60 16.2-60 16.2s35.9-1.8 60-16.2c6.2-3.7 12-8.3 16.6-13.3c3.6 3.1 7.2 6.1 10.9 8.8c34.5 25.9 44.5 73.1 44.5 73.1s35.5-35.3 20.2-96.4zM535.8 296c-30.8 0-55.8 25-55.8 55.8c0 7 1.5 13.6 4.2 19.6c-4.4 .9-9 1.4-13.8 1.4c-35.3 0-64-28.7-64-64c0-35.3 28.7-64 64-64c35.3 0 64 28.7 64 64c0 4.8-.5 9.4-1.4 13.8c-6-2.7-12.6-4.2-19.6-4.2c-12.7 0-23.7 6.9-29.8 17.1l-14-9.3 14 9.3c5-8.5 14.3-14.2 24.8-14.2c2.1 0 4.1 .2 6.1 .7c-3.1-5.1-4.9-11-4.9-17.4c0-18.7 15.1-33.8 33.8-33.8s33.8 15.1 33.8 33.8c0 6.4-1.8 12.3-4.9 17.4c2-.4 4.1-.7 6.1-.7c15.8 0 28.6 12.8 28.6 28.6c0 15.8-12.8 28.6-28.6 28.6c-2.1 0-4.1-.2-6.1-.7c3.1 5.1 4.9 11 4.9 17.4c0 18.7-15.1 33.8-33.8 33.8s-33.8-15.1-33.8-33.8c0-6.4 1.8-12.3 4.9-17.4c-2 .4-4.1 .7-6.1 .7c-15.8 0-28.6-12.8-28.6-28.6c0-15.8 12.8-28.6 28.6-28.6c2.1 0 4.1 .2 6.1 .7c-3.1-5.1-4.9-11-4.9-17.4c0-10.5 5.7-19.8 14.2-24.8z"/></svg></div><span class="topic-name">Vở Kịch</span></div>
                <div class="topic-card" onclick="goToExam('nlxh')"><div class="topic-icon"><svg viewBox="0 0 512 512"><path d="M57.7 193l9.4 16.4c8.3 14.5 21.9 25.2 38 29.8L163 255.7c17.2 4.9 29 20.6 29 38.5v39.9c0 11 6.2 21 16 25.9s16 14.9 16 25.9v39c0 15.6 14.9 26.9 29.9 22.6c16.1-4.6 28.6-17.5 32.7-33.8l19.6-78.4c2.1-8.5 8.1-15.5 15.9-18.8L348.1 300c7.8-3.3 12.9-11.1 12.9-19.6c0-38.1 20.4-73.3 53.5-92.5l6.3-3.6c22-12.7 32.7-38.6 26-63l-.7-2.4C440.1 57.6 356.5 0 256 0C114.6 0 0 114.6 0 256c0 17 1.7 33.7 4.9 49.8l20.8-20.8c20.3-20.3 29.7-49.6 25-78.1l-6-36.2c-3.2-19.2 6.4-38.6 23.7-47.9l-10.7-6zM32 256c0 123.7 100.3 224 224 224c65.2 0 124.2-28.1 164.7-73l-13.8-8.3c-15.9-9.5-25.5-26.6-25.5-45.1v-22c0-30.9-25.1-56-56-56h-2.5c-20.9 0-39.7 12.7-47.3 32l-1.1 2.8c-11.4 29-45.7 42.1-73.7 28.1L154.2 316.6c-16.7-8.4-25.7-27.1-21.6-45.3l6.9-30.7c3.9-17.2-2.1-35-15.9-46.7L96.1 170.6c-9.3-7.9-23.2-6.5-30.8 3L44.7 199.4C36.4 217.1 32 236.3 32 256z"/></svg></div><span class="topic-name">Nghị Luận Xã Hội</span></div>
                <div class="topic-card" onclick="goToExam('doc-hieu')"><div class="topic-icon"><svg viewBox="0 0 512 512"><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/></svg></div><span class="topic-name">Đọc Hiểu</span></div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, query, where, orderBy, limit, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAJ9C2biYeiLPmhakzLZ4mEqfO9_VgPSZE",
            authDomain: "hopvan-9a648.firebaseapp.com",
            projectId: "hopvan-9a648",
            storageBucket: "hopvan-9a648.appspot.com",
            messagingSenderId: "429347196227",
            appId: "1:429347196227:web:917b8d019f0efd0f7833f6",
            measurementId: "G-1BG8PSRG0R"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // --- 1. KIỂM TRA ĐĂNG NHẬP & LOAD DỮ LIỆU ---
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                // Hiển thị tên
                const name = user.displayName || user.email;
                document.getElementById('welcome-name').textContent = `Xin chào, ${name}`;
                document.getElementById('avatar-initial').textContent = name.charAt(0).toUpperCase();

                // Tải lịch sử hoạt động từ Firebase
                loadRecentActivity(user);
            } else {
                window.location.href = "log.html";
            }
        });

        // --- 2. HÀM TẢI LỊCH SỬ TỪ FIREBASE ---
        async function loadRecentActivity(user) {
            const listEl = document.getElementById('activity-list');
            try {
                // Query: Lấy 3 hoạt động mới nhất của user này
                const q = query(
                    collection(db, "activities"), 
                    where("uid", "==", user.uid), 
                    orderBy("timestamp", "desc"), 
                    limit(3)
                );
                
                const querySnapshot = await getDocs(q);
                
                if (querySnapshot.empty) {
                    listEl.innerHTML = `<li style="text-align: center; color: #999; padding: 20px;">Chưa có hoạt động nào. Hãy luyện đề ngay!</li>`;
                } else {
                    listEl.innerHTML = ''; // Xóa loading
                    querySnapshot.forEach((doc) => {
                        const data = doc.data();
                        // Chuyển timestamp thành giờ VN
                        const date = data.timestamp ? new Date(data.timestamp.seconds * 1000) : new Date();
                        const timeString = date.toLocaleDateString('vi-VN') + ' • ' + date.toLocaleTimeString('vi-VN', {hour: '2-digit', minute:'2-digit'});

                        const itemHTML = `
                            <li class="activity-item">
                                <div class="act-icon orange"><i class="fas fa-pen-nib"></i></div>
                                <div class="act-info">
                                    <h4>${data.action || 'Làm bài tập'}</h4>
                                    <p>${timeString}</p>
                                </div>
                                <div class="act-status text-green-500">Hoàn thành</div>
                            </li>
                        `;
                        listEl.innerHTML += itemHTML;
                    });
                }
            } catch (error) {
                console.error("Lỗi tải lịch sử:", error);
                // Nếu lỗi (do chưa tạo index hoặc permission), hiện data giả để giao diện vẫn đẹp
                listEl.innerHTML = `
                    <li class="activity-item"><div class="act-icon orange"><i class="fas fa-pen-nib"></i></div><div class="act-info"><h4>Luyện đề NLXH (Mẫu)</h4><p>Vừa xong</p></div><div class="act-status text-green-500">Hoàn thành</div></li>
                    <li class="activity-item"><div class="act-icon green"><i class="fas fa-user-check"></i></div><div class="act-info"><h4>Đăng nhập</h4><p>Hôm nay</p></div><div class="act-status">Thành công</div></li>
                `;
            }
        }

        // --- 3. CÁC HÀM UI KHÁC ---
        document.getElementById('btn-logout').addEventListener('click', () => {
            if(confirm("Đăng xuất nhé?")) signOut(auth).then(() => window.location.href = "index.html");
        });

        window.toggleSidebar = function() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.querySelector('.sidebar-overlay');
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        window.switchTab = function(tabId, element) {
            document.querySelectorAll('.content-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            element.classList.add('active');
            if(window.innerWidth <= 768) toggleSidebar();
        }

        window.openTopicModal = function() { document.getElementById('topicModal').style.display = "flex"; }
        window.closeTopicModal = function() { document.getElementById('topicModal').style.display = "none"; }
        window.onclick = function(event) { if (event.target == document.getElementById('topicModal')) window.closeTopicModal(); }

        window.goToExam = function(type) {
            console.log("Selected type:", type);
            localStorage.setItem('selectedTopic', type); 
            window.location.href = "phongluyende/index.html"; 
        }
    </script>
</body>
</html>